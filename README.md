# ChatApp Pro - Votre Hub de Communication en Temps RÃ©el 

Bienvenue sur **ChatApp Pro**, une application de chat moderne, interactive et ultra-rapide conÃ§ue pour connecter les gens Ã  travers des salles de discussion thÃ©matiques (_rooms_) en **temps rÃ©el**. Plongez dans des conversations fluides et dynamiques !

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![React Native](https://img.shields.io/badge/React%20Native-%2320232a.svg?style=for-the-badge&logo=react&logoColor=%2361DAFB)](https://reactnative.dev/)
[![Expo](https://img.shields.io/badge/Expo-%23000020.svg?style=for-the-badge&logo=expo&logoColor=%23fff)](https://expo.dev/)
[![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white)](https://www.python.org/)
[![Flask](https://img.shields.io/badge/Flask-%23000.svg?style=for-the-badge&logo=flask&logoColor=%23fff)](https://flask.palletsprojects.com/)
[![Redis](https://img.shields.io/badge/redis-%23DD0031.svg?style=for-the-badge&logo=redis&logoColor=white)](https://redis.io/)
[![Socket.io](https://img.shields.io/badge/Socket.io-black?style=for-the-badge&logo=socket.io&badgeColor=010101)](https://socket.io/)

---

## AperÃ§u

ChatApp Pro rÃ©invente la communication instantanÃ©e :

-  **Rejoignez des Rooms:** Connectez-vous facilement avec un pseudo et un ID de salle.
-  **Messagerie InstantanÃ©e:** Ã‰changez des messages qui apparaissent comme par magie.
-   ðŸ‘€ **Qui est en Ligne ?** Visualisez la liste des participants actifs.
-  **Notifications Intelligentes:** Soyez alertÃ© des arrivÃ©es et dÃ©parts, sans Ãªtre submergÃ©.

---

## Architecture Robuste

ChatApp Pro s'appuie sur des technologies de pointe pour une expÃ©rience optimale :

### Backend (Python / Flask)

-   **Framework Puissant** : Flask & Flask-SocketIO pour une gestion temps rÃ©el performante.
-   **Base de DonnÃ©es Ultra-Rapide** : Redis pour la persistance des messages et la gestion des Ã©tats.
-   **Communication Magique** : WebSockets pour des Ã©changes instantanÃ©s.

### Frontend (React Native / Expo)

-   **ExpÃ©rience Native** : React Native & Expo pour une application mobile cross-platform fluide.
-   **Navigation Intuitive** : React Navigation v7 pour des transitions Ã©lÃ©gantes.
-   **Client WebSocket Efficace** : Socket.IO Client pour une connexion stable avec le backend.
-   **UI Moderne & AnimÃ©e** : Une interface utilisateur soignÃ©e avec des animations subtiles pour le plaisir des yeux.

---

## FonctionnalitÃ©s ClÃ©s

### Authentification SimplifiÃ©e
- Connexion rapide via nom dâ€™utilisateur et ID de room.
- Validation des champs pour Ã©viter les erreurs.

### Chat en Temps RÃ©el
- Messages instantanÃ©s avec confirmation visuelle.
- Horodatage prÃ©cis pour chaque message.
- Avatars ColorÃ©s Uniques gÃ©nÃ©rÃ©s dynamiquement.

### Interface Utilisateur SoignÃ©e
- Design moderne, Ã©purÃ© et responsive.
- Animations fluides pour une expÃ©rience utilisateur agrÃ©able.
- Mode Sombre pour l'En-tÃªte.
- Indicateurs d'Ã©tat clairs.

### Notifications SystÃ¨me
- Messages de bienvenue personnalisÃ©s.
- Notifications d'arrivÃ©e et de dÃ©part des utilisateurs.
- Compteur d'utilisateurs connectÃ©s en temps rÃ©el.

### Persistance des DonnÃ©es Intelligente
- Historique des messages sauvegardÃ© via Redis.
- RÃ©cupÃ©ration automatique de l'historique Ã  la reconnexion.
- LimitÃ© aux 100 derniers messages par room pour optimiser les performances.

---

##  Installation et Configuration

PrÃ©parez-vous Ã  chatter en quelques Ã©tapes !

### PrÃ©requis

#### Backend
- Python 3.8+
- Redis Server
- pip (gestionnaire de paquets Python)

#### Frontend
- Node.js 16+
- npm ou yarn
- Expo CLI (`npm install -g expo-cli`)
- Un smartphone avec l'application Expo Go ou un Ã©mulateur Android/iOS.

---

### Backend Setup

1.  **Clonez le dÃ©pÃ´t :**
    ```bash
    git clone <votre-repository-url>
    cd chat_app/backend
    ```

2.  **Installez les dÃ©pendances Python :**
    CrÃ©ez un environnement virtuel (recommandÃ©) :
    ```bash
    python -m venv venv
    source venv/bin/activate  # Sur Windows: venv\Scripts\activate
    ```
    Puis installez les paquets :
    ```bash
    pip install -r requirements.txt
    # Ou si requirements.txt n'existe pas encore:
    # pip install flask flask-socketio flask-cors redis python-dotenv
    ```

3.  **DÃ©marrez Redis :**
    *   **Ubuntu/Debian:** `sudo service redis-server start`
    *   **macOS (Homebrew):** `brew services start redis`
    *   **Windows (via Docker or WSL):** `docker run -d -p 6379:6379 redis:alpine`
    *   VÃ©rifiez : `redis-cli ping` (doit retourner `PONG`)

4.  **Configurez les variables d'environnement :**
    CrÃ©ez un fichier `.env` Ã  la racine de `backend/` (voir `backend/.env.example` s'il existe) :
    ```ini
    # backend/.env
    REDIS_HOST=localhost
    REDIS_PORT=6379
    FLASK_APP=app.py # ou le nom de votre fichier principal Flask
    FLASK_DEBUG=True # Mettre Ã  False en production
    SERVER_PORT=5000
    FLASK_SECRET_KEY=votre_super_cle_secrete_ici
    ```

5.  **DÃ©marrez le serveur Flask :**
    ```bash
    python app.py 
    # Ou si vous utilisez FLASK_APP dans .env : flask run
    ```
    Le serveur sera en Ã©coute sur `http://0.0.0.0:5000`.

---

### Frontend Setup

1.  **Naviguez vers le dossier frontend :**
    ```bash
    cd ../frontend 
    # Assurez-vous d'Ãªtre dans le bon dossier frontend
    ```

2.  **Installez les dÃ©pendances Node.js :**
    ```bash
    npm install
    # ou
    # yarn install
    ```

3.  **Configurez l'URL du serveur Backend :**
    Ouvrez `frontend/src/services/SocketService.ts` (ou le fichier Ã©quivalent) et modifiez :
    ```typescript
    // frontend/src/services/SocketService.ts
    private readonly serverUrl = 'http://VOTRE_IP_LOCALE_BACKEND:5000';
    // Remplacez VOTRE_IP_LOCALE_BACKEND par l'adresse IP de la machine hÃ©bergeant le backend.
    // (ex: 192.168.1.XX). N'utilisez PAS localhost ou 127.0.0.1 si vous testez sur un appareil mobile physique.
    ```

4.  **DÃ©marrez l'application Expo :**
    ```bash
    npm start
    # ou
    # yarn start
    ```
    Scannez le QR Code avec Expo Go ou lancez sur un Ã©mulateur.

---

##  API & Communication (WebSockets)

### Ã‰vÃ©nements Ã‰mis (Client â†’ Serveur)
- `join_room` ({ `username`: string, `roomId`: string, `avatarColor`: string })
- `send_message` ({ `message`: string, `username`: string, `roomId`: string, `avatarColor`: string })
- `disconnect` (gÃ©rÃ© automatiquement par Socket.IO)

### Ã‰vÃ©nements ReÃ§us (Serveur â†’ Client)
- `connected` ({ `message`: string })
- `room_joined` ({ `roomId`: string, `username`: string, `messages`: Message[], `users`: string[] })
- `new_message` (message: Message)
- `user_joined` ({ `username`: string, `users`: string[], `avatarColor`: string })
- `user_left` ({ `username`: string, `users`: string[] })
- `error` ({ `message`: string })

### Structure d'un Message
```typescript
interface Message {
  id: string;
  userId: string; // Peut Ãªtre le username pour la simplicitÃ©
  username: string;
  message: string;
  timestamp: string; // ISO 8601 Date string
  roomId: string;
  type?: 'message' | 'notification' | 'system';
  avatarColor?: string;
}
```

## Structure du Projet
```bash
chat_app/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ .env             # Variables d'environnement (NON versionnÃ©)
â”‚   â”œâ”€â”€ app.py           # Logique du serveur Flask & SocketIO
â”‚   â””â”€â”€ requirements.txt # DÃ©pendances Python (gÃ©nÃ©rez-le avec pip freeze > requirements.txt)
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ App.tsx          # Point d'entrÃ©e principal React Native
â”‚   â”œâ”€â”€ app.json         # Configuration Expo
â”‚   â”œâ”€â”€ package.json     # DÃ©pendances et scripts NPM
â”‚   â”œâ”€â”€ tsconfig.json    # Configuration TypeScript
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/      # Composants UI rÃ©utilisables
â”‚       â”œâ”€â”€ navigation/      # Configuration React Navigation
â”‚       â”œâ”€â”€ screens/         # Ã‰crans de l'application
â”‚       â”œâ”€â”€ services/        # Logique mÃ©tier et communication (SocketService)
â”‚       â”œâ”€â”€ types/           # DÃ©finitions TypeScript
â”‚       â””â”€â”€ utils/           # Fonctions utilitaires
â””â”€â”€ README.md
```

## Utilisation
1. Assurez-vous que Redis est en cours d'exÃ©cution.
2. DÃ©marrez le serveur backend (python app.py dans le dossier backend).
3. Lancez l'application mobile frontend (npm start dans le dossier frontend).
4. Sur l'Ã©cran de connexion :
    - Entrez un Nom dâ€™utilisateur.
    - Entrez un ID de la Room.
5. Appuyez sur "Rejoindre" et commencez Ã  discuter !

## DÃ©veloppement & Scripts
### Backend
```bash
# (Dans le dossier backend/)
# Activer l'environnement virtuel si vous en utilisez un
# source venv/bin/activate
python app.py
```

### Frontend
```bash
# (Dans le dossier frontend/)
npm start        # DÃ©marre le Metro Bundler d'Expo
npm run android  # Lance l'app sur un Ã©mulateur/appareil Android
npm run ios      # Lance l'app sur un Ã©mulateur/appareil iOS
# npm run web    # (Si configurÃ© pour le web)
```

## Pistes d'AmÃ©lioration & FonctionnalitÃ©s Futures (Roadmap)
- Indicateurs de frappe ("User is typing...")
- Messages privÃ©s
- Partage de fichiers/images
- RÃ©actions Emoji
- ThÃ¨mes personnalisables (clair/sombre global)
- Authentification avancÃ©e
- Notifications Push natives

## DÃ©pannage
| ProblÃ¨me                       | Solution                                                              |
| ------------------------------ | --------------------------------------------------------------------- |
| Connexion Redis impossible     | Assurez-vous que Redis est dÃ©marrÃ© (`redis-cli ping`)                 |
| Erreur de connexion au serveur | VÃ©rifiez lâ€™IP dans `SocketService.ts`, lancez le backend, firewall ok |
| App ne dÃ©marre pas             | VÃ©rifiez Node/npm, supprimez `node_modules`, puis `npm install`       |

## Contribution
Les contributions sont les bienvenues !
- Forkez le projet.
- CrÃ©ez votre branche de fonctionnalitÃ© (git checkout -b feature/MaSuperFonctionnalite).
- Commitez vos changements (git commit -m 'Ajout: MaSuperFonctionnalite').
- Poussez vers la branche (git push origin feature/MaSuperFonctionnalite).
- Ouvrez une Pull Request.